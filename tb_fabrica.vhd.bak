library IEEE;
use IEEE.std_logic_1164.all;
use IEEE.numeric_std.all;
use std.textio.all;

entity tb_fabrica is
end entity tb_fabrica;

architecture sim of tb_fabrica is

    -- DUT ports
    signal clk_tb         : std_logic := '0';
    signal btn_edge_tb    : std_logic := '0';
    signal switches_tb    : std_logic_vector(6 downto 0) := (others => '0');
	 -- signal E1_reg_tb, E2_reg_tb, E3_reg_tb, E4_reg_tb, E5_reg_tb, E6_reg_tb : std_logic_vector(3 downto 0) := (others => '0');
	 signal bcd1_tb, bcd2_tb, bcd3_tb, bcd4_tb, bcd5_tb, bcd6_tb : std_logic_vector(6 downto 0) := (others => '0');
    -- Clock period
    constant CLK_PERIOD : time := 20 ns;

begin
    --------------------------------------------------------------------
    -- DUT instantiation
    --------------------------------------------------------------------
    dut : entity work.fabrica
        port map (
            clk         => clk_tb,
            btn_edge    => btn_edge_tb,
            switches_in => switches_tb,
				-- E1_reg 		=> E1_reg_tb,
				-- E2_reg 		=> E2_reg_tb,
				-- E3_reg 		=> E3_reg_tb,
				-- E4_reg 		=> E4_reg_tb,
				-- E5_reg 		=> E5_reg_tb,
				-- E6_reg 		=> E6_reg_tb,
				bcd1 => bcd1_tb,
				bcd2 => bcd2_tb,
				bcd3 => bcd3_tb,
				bcd4 => bcd4_tb,
				bcd5 => bcd5_tb,
				bcd6 => bcd6_tb
				
        );

    --------------------------------------------------------------------
    -- CLOCK GENERATION
    --------------------------------------------------------------------
    clk_process : process
	 
    begin
        clk_tb <= '0';
        wait for CLK_PERIOD/2;
        clk_tb <= '1';
        wait for CLK_PERIOD/2;
    end process;

    --------------------------------------------------------------------
    -- BUTTON EDGE PULSE GENERATOR
    --------------------------------------------------------------------

	 bot_process : process
	 
    begin
		  btn_edge_tb <= '1';
        wait for CLK_PERIOD/5;
		  btn_edge_tb <= not btn_edge_tb;
        wait for CLK_PERIOD/5;
    end process;
	 
    --------------------------------------------------------------------
    -- SWITCHES STIMULUS (INPUT DATA)
    --------------------------------------------------------------------
    stim_switches : process
    begin
        -- Exemplo: definir switches para um valor útil
        -- switches_tb(3 downto 0) = BCD
        -- switches_tb(6 downto 4) = outras entradas para o datapath
        switches_tb <= "1111111";  -- altere conforme necessário

        wait for 50 ns;

        switches_tb <= "1111111";

        wait;
    end process;

end architecture sim;